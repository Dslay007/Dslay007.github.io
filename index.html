<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplikasi SiPanganCerdas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/date-fns/1.30.1/date_fns.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        .chart-container {
            position: relative;
            height: 400px;
            width: 100%;
        }
        .small-chart-container {
            position: relative;
            height: 150px;
            width: 100%;
        }
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 280px;
            background-color: #334155;
            color: #fff;
            text-align: left;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -140px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.8rem;
            line-height: 1.4;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        /* --- Visual Hierarchy & Highlighting Styles --- */
        /* Primary Action (Active states, main buttons) */
        .btn-primary, .nav-link.active, .time-range-btn.active {
            background-color: #4f46e5; /* indigo-600 */
            color: #ffffff;
            font-weight: 600;
        }
        .nav-link.active {
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
        }
        .nav-link.active i {
            color: #ffffff;
        }

        /* Secondary Action (Dropdowns, interactive but not primary) */
        .select-secondary, input[type="date"] {
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.5rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem;
            border-color: #cbd5e1; /* slate-300 */
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        input[type="date"] {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3crect x='3' y='4' width='18' height='18' rx='2' ry='2'%3e%3c/rect%3e%3cline x1='16' y1='2' x2='16' y2='6'%3e%3c/line%3e%3cline x1='8' y1='2' x2='8' y2='6'%3e%3c/line%3e%3cline x1='3' y1='10' x2='21' y2='10'%3e%3c/line%3e%3c/svg%3e");
            background-position: right 0.6rem center;
            background-size: 1.2em 1.2em;
        }
        input[type="date"]::-webkit-calendar-picker-indicator {
            opacity: 0;
        }
        .select-secondary:hover, input[type="date"]:hover {
            border-color: #94a3b8; /* slate-400 */
        }
        .select-secondary:focus, input[type="date"]:focus {
            outline: 2px solid transparent;
            outline-offset: 2px;
            border-color: #6366f1; /* indigo-500 */
            box-shadow: 0 0 0 2px #c7d2fe; /* indigo-200 */
        }

        /* Tertiary / Static Info (Non-interactive elements that look like controls) */
        .info-tertiary {
            background-color: #f1f5f9; /* slate-100 */
            border: 1px solid #e2e8f0; /* slate-200 */
            color: #475569; /* slate-600 */
        }

        /* Hover states for non-active buttons */
        .time-range-btn:not(.active):hover {
            background-color: #e2e8f0; /* slate-200 */
        }
        .nav-link:not(.active):hover {
            background-color: #f1f5f9; /* slate-100 */
        }
        /* --- End Highlighting --- */

        .page {
            display: none;
        }
        .page.active {
            display: block;
        }
    </style>
</head>
<body class="text-slate-800">

    <div id="login-page" class="hidden flex items-center justify-center h-screen bg-slate-100">
        </div>


    <div id="app-container">
        <div class="flex h-screen">
            <aside class="w-64 bg-white border-r border-slate-200 flex-shrink-0 flex flex-col fixed md:static h-screen z-30 transform -translate-x-full md:translate-x-0 transition-transform duration-300 ease-in-out">
                <div>
                    <div class="p-6 hidden md:flex items-center space-x-3">
                        <div class="bg-indigo-600 text-white p-2 rounded-lg">
                            <i data-lucide="line-chart"></i>
                        </div>
                        <h1 class="text-xl font-bold text-indigo-600">SiPanganCerdas</h1>
                    </div>
                    <nav id="sidebar-nav" class="mt-6 px-4">
                        <a href="#dashboard" class="nav-link flex items-center px-4 py-2 text-slate-700 rounded-lg font-semibold active">
                            <i data-lucide="layout-dashboard" class="w-5 h-5 mr-3 text-slate-500"></i>
                            Dasbor Harga
                        </a>
                        <a href="#correlation" class="nav-link flex items-center px-4 py-2 mt-2 text-slate-600 rounded-lg">
                            <i data-lucide="bar-chart-3" class="w-5 h-5 mr-3 text-slate-500"></i>
                            Analisis Korelasi
                        </a>
                        <a href="#factors" class="nav-link flex items-center px-4 py-2 mt-2 text-slate-600 rounded-lg">
                            <i data-lucide="cloud-sun" class="w-5 h-5 mr-3 text-slate-500"></i>
                            Faktor Eksternal
                        </a>
                         <a href="#news" class="nav-link flex items-center px-4 py-2 mt-2 text-slate-600 rounded-lg">
                            <i data-lucide="newspaper" class="w-5 h-5 mr-3 text-slate-500"></i>
                            Berita Pangan
                        </a>
                        <a href="#about" class="nav-link flex items-center px-4 py-2 mt-2 text-slate-600 rounded-lg">
                            <i data-lucide="info" class="w-5 h-5 mr-3 text-slate-500"></i>
                            Tentang Aplikasi
                        </a>
                    </nav>
                </div>
                <div class="mt-auto p-4">
                     <a href="#" id="logout-btn" class="flex items-center px-4 py-2 mt-2 text-slate-600 hover:bg-red-50 hover:text-red-600 rounded-lg">
                        <i data-lucide="log-out" class="w-5 h-5 mr-3"></i>
                        Keluar
                    </a>
                </div>
            </aside>
            <div id="sidebar-backdrop" class="fixed inset-0 bg-black bg-opacity-50 z-20 hidden md:hidden"></div>
            <div class="flex-1 overflow-y-auto">

                <div class="md:hidden p-4 bg-white border-b border-slate-200 flex justify-between items-center sticky top-0 z-10">
                    <div class="flex items-center space-x-3">
                        <div class="bg-indigo-600 text-white p-2 rounded-lg">
                            <i data-lucide="line-chart"></i>
                        </div>
                        <h1 class="text-xl font-bold text-indigo-600">SiPanganCerdas</h1>
                    </div>
                    <button id="mobile-menu-btn" class="p-2 rounded-lg hover:bg-slate-100">
                        <i data-lucide="menu" class="w-6 h-6"></i>
                    </button>
                </div>
                <main id="page-dashboard" class="page active p-8">
                    <header class="flex flex-col md:flex-row justify-between items-center mb-8">
                        <div>
                            <h2 class="text-3xl font-bold">Dasbor Harga Bahan Pokok</h2>
                            <p id="location-subtitle" class="text-slate-500 mt-1">Analisis dan Prediksi Harga Nasional</p>
                        </div>
                        <div class="flex items-center space-x-4 mt-4 md:mt-0">
                            <div class="relative">
                                <select id="region-select" class="select-secondary w-48 p-2 pl-3 border rounded-lg bg-white transition">
                                    <option value="nasional">Nasional</option>
                                    <option value="jatim">Jawa Timur</option>
                                    <option value="dki">DKI Jakarta</option>
                                    <option value="jabar">Jawa Barat</option>
                                </select>
                            </div>
                            <div>
                                <input type="date" id="currentDateInput" class="select-secondary w-48 p-2 pl-3 border rounded-lg bg-white transition">
                            </div>
                        </div>
                    </header>

                    <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm mb-8">
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 items-center">
                            <div class="lg:col-span-1">
                                <label for="commodity-select" class="text-sm font-medium text-slate-600">Pilih Komoditas</label>
                                <div class="mt-1 relative">
                                    <select id="commodity-select" class="select-secondary w-full pl-4 py-2.5 border rounded-lg bg-white transition">
                                        <option value="beras">Beras Premium</option>
                                        <option value="minyak">Minyak Goreng Curah</option>
                                        <option value="gula">Gula Pasir</option>
                                        <option value="cabai">Cabai Rawit Merah</option>
                                    </select>
                                </div>
                            </div>
                            <div id="overview-last-price" class="flex items-center space-x-4 p-4 bg-slate-50 rounded-lg">
                                <div class="p-3 bg-blue-100 text-blue-600 rounded-full">
                                    <i data-lucide="tag"></i>
                                </div>
                                <div>
                                    <p class="text-sm text-slate-500">Harga Hari Ini (/kg)</p>
                                    <p class="text-2xl font-bold text-slate-800">Rp 15.200</p>
                                </div>
                            </div>
                             <div id="overview-price-change" class="flex items-center space-x-4 p-4 bg-slate-50 rounded-lg">
                                <div class="p-3 bg-red-100 text-red-600 rounded-full">
                                    <i data-lucide="trending-down"></i>
                                </div>
                                <div>
                                    <p class="text-sm text-slate-500">Perubahan (24 Jam)</p>
                                    <p class="text-2xl font-bold text-red-600 flex items-center">- Rp 150 <span class="text-base font-medium ml-2">(-1.05%)</span></p>
                                </div>
                            </div>
                             <div id="overview-prediction" class="flex items-center space-x-4 p-4 bg-slate-50 rounded-lg">
                                <div class="p-3 bg-green-100 text-green-600 rounded-full">
                                   <i data-lucide="arrow-up-right"></i>
                                </div>
                                <div>
                                    <p class="text-sm text-slate-500">Prediksi Besok</p>
                                    <p class="text-2xl font-bold text-green-600">Rp 15.250</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div class="lg:col-span-2 bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                            <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4">
                                <h3 id="chart-title" class="text-lg font-bold mb-3 sm:mb-0">Grafik Harga dan Prediksi (Beras Premium)</h3>
                                <div id="time-range-selector" class="flex space-x-1 bg-slate-100 p-1 rounded-lg">
                                    <button data-range="30" class="time-range-btn px-3 py-1 text-sm rounded-md active">1 Bulan</button>
                                    <button data-range="90" class="time-range-btn px-3 py-1 text-sm text-slate-500 rounded-md">3 Bulan</button>
                                    <button data-range="365" class="time-range-btn px-3 py-1 text-sm text-slate-500 rounded-md">1 Tahun</button>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="priceChart"></canvas>
                            </div>
                        </div>

                        <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                            <h3 class="text-lg font-bold mb-4">Faktor Pengaruh Utama</h3>
                            <div id="factors-summary-container" class="space-y-4">
                                </div>
                        </div>
                    </div>

                    <div class="mt-8 bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                         <h3 class="text-lg font-bold mb-4">Rekomendasi Strategis</h3>
                         <div id="recommendation-container">
                            </div>
                    </div>

                    <div class="mt-8 bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                         <h3 class="text-lg font-bold mb-4">Tabel Outlook Harga (Semua Komoditas)</h3>
                         <div class="overflow-x-auto">
                            <table class="w-full text-left">
                                <thead class="bg-slate-50 text-sm text-slate-600">
                                    <tr>
                                        <th class="p-4 font-semibold rounded-l-lg">Komoditas</th>
                                        <th class="p-4 font-semibold">Harga Saat Ini (/kg)</th>
                                        <th class="p-4 font-semibold">Outlook 1 Minggu</th>
                                        <th class="p-4 font-semibold">Outlook 1 Bulan</th>
                                        <th class="p-4 font-semibold">Outlook 3 Bulan</th>
                                        <th class="p-4 font-semibold text-center rounded-r-lg">Rekomendasi</th>
                                    </tr>
                                </thead>
                                <tbody id="outlook-table-body"></tbody>
                            </table>
                        </div>
                    </div>
                </main>

                <main id="page-correlation" class="page p-8">
                    <header class="mb-8">
                        <h2 class="text-3xl font-bold">Analisis Korelasi</h2>
                        <p class="text-slate-500 mt-1">Memahami Hubungan Antar Variabel yang Mempengaruhi Harga</p>
                    </header>

                    <div class="space-y-8">

                        <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                            <h3 class="text-lg font-bold mb-4">Visualisasi Korelasi (Scatter Plot)</h3>
                            <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 mb-4">
                                <div class="flex-1">
                                    <label class="text-sm font-medium">Variabel X</label>
                                    <select id="corr-var-x" class="select-secondary w-full mt-1 p-2 border rounded-lg bg-white">
                                        </select>
                                </div>
                                 <div class="flex-1">
                                    <label class="text-sm font-medium">Variabel Y</label>
                                    <select id="corr-var-y" class="select-secondary w-full mt-1 p-2 border rounded-lg bg-white">
                                        </select>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="correlationChart"></canvas>
                            </div>
                        </div>

                        <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                            <h3 class="text-lg font-bold mb-4">Matriks Korelasi</h3>
                            <p class="text-sm text-slate-500 mb-4">
                                Menunjukkan kekuatan hubungan antar variabel. Nilai mendekati 1 (hijau) atau -1 (merah) menunjukkan korelasi kuat. Nilai mendekati 0 (putih) menunjukkan korelasi lemah.
                            </p>
                            <div class="overflow-x-auto">
                                <table id="correlation-matrix-table" class="w-full text-center text-sm border-collapse">
                                    <thead>
                                        </thead>
                                    <tbody>
                                        </tbody>
                                </table>
                            </div>
                            <div class="mt-4 p-4 bg-blue-50 border-l-4 border-blue-500 text-blue-800 space-y-2">
                                <h4 class="font-bold">Bagaimana Cara Membacanya?</h4>
                                <ul class="list-disc list-inside text-sm space-y-1">
                                    <li>
                                        <strong class="text-green-700">Korelasi Positif (e.g., 0.82):</strong> Jika satu variabel naik, variabel lainnya cenderung ikut naik. Contohnya, <strong>Harga BBM</strong> yang naik (biaya logistik) seringkali diikuti oleh kenaikan <strong>Harga Beras</strong>.
                                    </li>
                                    <li>
                                        <strong class="text-red-700">Korelasi Negatif (e.g., -0.75):</strong> Jika satu variabel naik, variabel lainnya cenderung turun. Contohnya, saat <strong>Stok Beras</strong> tinggi (pasokan melimpah), <strong>Harga Beras</strong> cenderung turun.
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </main>

                 <main id="page-factors" class="page p-8">
                    <header class="flex flex-col md:flex-row justify-between items-center mb-8">
                        <div>
                            <h2 class="text-3xl font-bold">Detail Faktor Eksternal</h2>
                            <p id="factors-subtitle" class="text-slate-500 mt-1">Memonitor semua variabel kunci yang mempengaruhi stabilitas pangan</p>
                        </div>
                        <div class="mt-4 md:mt-0">
                            <label for="factors-commodity-select" class="text-sm font-medium text-slate-600">Filter berdasarkan Komoditas</label>
                            <select id="factors-commodity-select" class="select-secondary w-full md:w-64 mt-1 p-2 border rounded-lg bg-white">
                                <option value="semua" selected>Semua Komoditas</option>
                                <option value="beras">Beras Premium</option>
                                <option value="minyak">Minyak Goreng Curah</option>
                                <option value="gula">Gula Pasir</option>
                                <option value="cabai">Cabai Rawit Merah</option>
                            </select>
                        </div>
                    </header>
                    <div id="factors-grid-container" class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        </div>
                </main>

                <main id="page-news" class="page p-8">
                    <header class="mb-8">
                        <h2 class="text-3xl font-bold">Berita Pangan dan Ekonomi</h2>
                        <p class="text-slate-500 mt-1">Kumpulan berita terbaru seputar sektor pangan dan logistik.</p>
                    </header>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">

                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex flex-col">
                            <img src="https://picsum.photos/seed/beras/600/300" alt="Ilustrasi beras" class="w-full h-48 object-cover">
                            <div class="p-6 flex flex-col flex-1">
                                <span class="text-sm font-semibold text-indigo-600 mb-2">KOMODITAS BERAS</span>
                                <h3 class="text-xl font-bold mb-3">Pemerintah Pastikan Stok Beras Aman Menjelang Akhir Tahun</h3>
                                <p class="text-slate-600 text-sm mb-4 flex-1">Kementerian Pertanian dan Bulog mengkonfirmasi bahwa stok Cadangan Beras Pemerintah (CBP) berada di level 1.5 Juta ton, cukup untuk mengantisipasi kebutuhan hingga 3 bulan ke depan.</p>
                                <a href="#" class="font-semibold text-indigo-600 hover:text-indigo-800 flex items-center">
                                    Baca Selengkapnya <i data-lucide="arrow-right" class="w-4 h-4 ml-1"></i>
                                </a>
                            </div>
                        </div>

                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex flex-col">
                            <img src="https://picsum.photos/seed/logistik/600/300" alt="Ilustrasi logistik" class="w-full h-48 object-cover">
                            <div class="p-6 flex flex-col flex-1">
                                <span class="text-sm font-semibold text-orange-600 mb-2">LOGISTIK & BBM</span>
                                <h3 class="text-xl font-bold mb-3">Kenaikan Harga BBM Nonsubsidi Pengaruhi Biaya Logistik Pangan</h3>
                                <p class="text-slate-600 text-sm mb-4 flex-1">Asosiasi logistik menyebutkan adanya penyesuaian tarif angkutan barang sekitar 5-10% menyusul kenaikan harga BBM industri, yang berpotensi berdampak pada harga eceran di pasar.</p>
                                <a href="#" class="font-semibold text-indigo-600 hover:text-indigo-800 flex items-center">
                                    Baca Selengkapnya <i data-lucide="arrow-right" class="w-4 h-4 ml-1"></i>
                                </a>
                            </div>
                        </div>

                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex flex-col">
                            <img src="https://picsum.photos/seed/cabai/600/300" alt="Ilustrasi cabai" class="w-full h-48 object-cover">
                            <div class="p-6 flex flex-col flex-1">
                                <span class="text-sm font-semibold text-red-600 mb-2">HORTIKULTURA</span>
                                <h3 class="text-xl font-bold mb-3">Musim Hujan Datang, Petani Cabai Diimbau Waspada Patek</h3>
                                <p class="text-slate-600 text-sm mb-4 flex-1">Curah hujan tinggi dapat memicu serangan jamur antraknosa (patek) pada tanaman cabai. Harga cabai rawit diperkirakan akan sangat fluktuatif dalam beberapa minggu ke depan.</p>
                                <a href="#" class="font-semibold text-indigo-600 hover:text-indigo-800 flex items-center">
                                    Baca Selengkapnya <i data-lucide="arrow-right" class="w-4 h-4 ml-1"></i>
                                </a>
                            </div>
                        </div>

                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex flex-col">
                            <img src="https://picsum.photos/seed/ekonomi/600/300" alt="Ilustrasi ekonomi" class="w-full h-48 object-cover">
                            <div class="p-6 flex flex-col flex-1">
                                <span class="text-sm font-semibold text-violet-600 mb-2">EKONOMI MAKRO</span>
                                <h3 class="text-xl font-bold mb-3">Bank Indonesia Menahan Suku Bunga Acuan di Level 6.25%</h3>
                                <p class="text-slate-600 text-sm mb-4 flex-1">Keputusan ini diambil untuk menjaga stabilitas nilai tukar Rupiah di tengah ketidakpastian global. Inflasi bahan pangan (volatile food) menjadi salah satu fokus utama BI.</p>
                                <a href="#" class="font-semibold text-indigo-600 hover:text-indigo-800 flex items-center">
                                    Baca Selengkapnya <i data-lucide="arrow-right" class="w-4 h-4 ml-1"></i>
                                </a>
                            </div>
                        </div>

                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex flex-col">
                            <img src="https://picsum.photos/seed/minyak/600/300" alt="Ilustrasi minyak sawit" class="w-full h-48 object-cover">
                            <div class="p-6 flex flex-col flex-1">
                                <span class="text-sm font-semibold text-yellow-600 mb-2">MINYAK SAWIT (CPO)</span>
                                <h3 class="text-xl font-bold mb-3">Harga CPO Global Berfluktuasi, Harga Minyak Goreng Domestik Stabil</h3>
                                <p class="text-slate-600 text-sm mb-4 flex-1">Meskipun harga CPO di pasar global naik tipis, kebijakan DMO (Domestic Market Obligation) berhasil menjaga harga minyak goreng curah dan kemasan di dalam negeri tetap terkendali.</p>
                                <a href="#" class="font-semibold text-indigo-600 hover:text-indigo-800 flex items-center">
                                    Baca Selengkapnya <i data-lucide="arrow-right" class="w-4 h-4 ml-1"></i>
                                </a>
                            </div>
                        </div>

                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex flex-col">
                            <img src="https://picsum.photos/seed/gula/600/300" alt="Ilustrasi gula" class="w-full h-48 object-cover">
                            <div class="p-6 flex flex-col flex-1">
                                <span class="text-sm font-semibold text-cyan-600 mb-2">KOMODITAS GULA</span>
                                <h3 class="text-xl font-bold mb-3">Musim Giling Tebu 2025 Lampaui Target Awal</h3>
                                <p class="text-slate-600 text-sm mb-4 flex-1">Produksi gula kristal putih (GKP) tahun ini mencatatkan hasil positif didukung cuaca yang kondusif. Hal ini diharapkan dapat menjaga harga gula pasir di level yang wajar.</p>
                                <a href="#" class="font-semibold text-indigo-600 hover:text-indigo-800 flex items-center">
                                    Baca Selengkapnya <i data-lucide="arrow-right" class="w-4 h-4 ml-1"></i>
                                </a>
                            </div>
                        </div>

                    </div>
                </main>

                <main id="page-about" class="page p-8 space-y-8">
                    <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                        <h2 class="text-2xl font-bold mb-4">SiPanganCerdas</h2>
                        <p class="text-slate-600 leading-relaxed">
                            SiPanganCerdas adalah sebuah platform web inovatif yang dirancang untuk menyediakan analisis dan prediksi harga bahan pokok secara akurat di tingkat nasional. Aplikasi ini bertujuan untuk menjadi pusat data dan informasi tepercaya bagi para pemangku kepentingan dalam memantau dinamika harga pangan di Indonesia.
                        </p>
                        <p class="text-slate-600 leading-relaxed mt-4">
                            Visi kami adalah untuk mendukung stabilitas dan ketahanan pangan nasional melalui penyediaan data yang transparan, real-time, dan mudah diakses.
                        </p>
                    </div>

                    <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                        <h2 class="text-2xl font-bold mb-6">Fitur Utama Kami</h2>
                        <div class="space-y-6">
                            <div class="flex items-start">
                                <div class="flex-shrink-0 bg-indigo-100 text-indigo-600 p-3 rounded-lg">
                                    <i data-lucide="layout-dashboard" class="w-6 h-6"></i>
                                </div>
                                <div class="ml-4">
                                    <h3 class="text-lg font-semibold">Dasbor Harga Interaktif</h3>
                                    <p class="text-slate-600 mt-1">Pantau harga terkini dari berbagai komoditas bahan pokok, lihat perubahan harga harian, dan analisis tren historis melalui grafik yang mudah dibaca.</p>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <div class="flex-shrink-0 bg-indigo-100 text-indigo-600 p-3 rounded-lg">
                                    <i data-lucide="line-chart" class="w-6 h-6"></i>
                                </div>
                                <div class="ml-4">
                                    <h3 class="text-lg font-semibold">Prediksi Harga Cerdas</h3>
                                    <p class="text-slate-600 mt-1">Dapatkan prediksi harga untuk hari berikutnya yang diolah menggunakan model analisis data canggih, membantu Anda dalam mengambil keputusan strategis.</p>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <div class="flex-shrink-0 bg-indigo-100 text-indigo-600 p-3 rounded-lg">
                                    <i data-lucide="bar-chart-3" class="w-6 h-6"></i>
                                </div>
                                <div class="ml-4">
                                    <h3 class="text-lg font-semibold">Analisis Korelasi</h3>
                                    <p class="text-slate-600 mt-1">Pahami bagaimana harga satu komoditas dapat berhubungan atau dipengaruhi oleh komoditas lainnya dan faktor eksternal.</p>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <div class="flex-shrink-0 bg-indigo-100 text-indigo-600 p-3 rounded-lg">
                                    <i data-lucide="cloud-sun" class="w-6 h-6"></i>
                                </div>
                                <div class="ml-4">
                                    <h3 class="text-lg font-semibold">Pemantauan Faktor Eksternal</h3>
                                    <p class="text-slate-600 mt-1">Kami mengintegrasikan data-data eksternal (seperti cuaca, kebijakan, dan tren pasar) yang berpotensi mempengaruhi fluktuasi harga.</p>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <div class="flex-shrink-0 bg-indigo-100 text-indigo-600 p-3 rounded-lg">
                                    <i data-lucide="newspaper" class="w-6 h-6"></i>
                                </div>
                                <div class="ml-4">
                                    <h3 class="text-lg font-semibold">Pusat Berita Pangan</h3>
                                    <p class="text-slate-600 mt-1">Tetap terinformasi dengan kumpulan berita terbaru seputar sektor pangan yang relevan dengan pergerakan harga.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                        <h2 class="text-2xl font-bold mb-4">Model Prediksi Kami</h2>
                        <p class="text-slate-600 leading-relaxed">
                            Fitur prediksi harga di <strong>SiPanganCerdas</strong> didukung oleh model machine learning canggih yang telah dilatih menggunakan data historis harga pangan dari berbagai sumber tepercaya.
                        </p>
                        <p class="text-slate-600 leading-relaxed mt-4">
                            Model kami secara kontinu menganalisis pola dan tren pasar, serta memperhitungkan berbagai faktor eksternal untuk menghasilkan prediksi dengan tingkat akurasi yang tinggi. Kami berkomitmen untuk terus meningkatkan dan menyempurnakan model ini demi memberikan wawasan yang paling andal bagi Anda.
                        </p>
                    </div>

                    <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                        <h2 class="text-2xl font-bold mb-4">Untuk Siapa Aplikasi Ini?</h2>
                        <p class="text-slate-600 leading-relaxed">
                            <strong>SiPanganCerdas</strong> ditujukan bagi para pembuat kebijakan, analis ekonomi, pelaku industri pangan, peneliti, serta masyarakat umum yang peduli dan ingin memahami dinamika harga bahan pokok di Indonesia.
                        </p>
                        <p class="text-slate-600 leading-relaxed mt-4">
                            Dengan SiPanganCerdas, kami berharap dapat memberikan kontribusi positif dalam menciptakan ekosistem pangan yang lebih stabil dan transparan.
                        </p>
                    </div>
                </main>
                </div>
            </div>
    </div>

    <script>
    // --- REALISTIC MOCK DATA (Refactored) ---

    // Global data for external factors
    const FACTORS_DATA = { /* ... Data Faktor Eksternal (Sama seperti sebelumnya) ... */ };

    // ========== MODIFIKASI MOCK_DATA UNTUK MANUAL CHANGE ==========
    const MOCK_DATA = {
        nasional: {
            name: "Nasional",
            beras: {
                name: "Beras Premium", chartBase: 15100, volatility: 0.05, trend: 0.0001,
                outlook: { week: 0.5, month: 1.5, threeMonth: 2.5 },
                factorKeys: ['stock_beras', 'bbm', 'weather', 'inflation'],
                manualChange: { value: -150, percent: -1.05 } // Manual Beras Nasional
            },
            minyak: {
                name: "Minyak Goreng Curah", chartBase: 15700, volatility: 0.15, trend: 0.0002,
                outlook: { week: 0.8, month: 2.0, threeMonth: 3.0 },
                factorKeys: ['stock_minyak', 'bbm', 'inflation', 'weather'],
                manualChange: { value: 50, percent: 0.32 } // Manual Minyak Nasional
            },
            gula: {
                name: "Gula Pasir", chartBase: 18450, volatility: 0.10, trend: 0.0001,
                outlook: { week: 0.2, month: 0.5, threeMonth: 1.0 },
                factorKeys: ['stock_gula', 'bbm', 'inflation', 'weather'],
                manualChange: { value: 0, percent: 0.00 } // Manual Gula Nasional
            },
            cabai: {
                name: "Cabai Rawit Merah", chartBase: 56000, volatility: 0.45, trend: 0.0000,
                outlook: { week: -5.0, month: -10.0, threeMonth: 20.0 },
                factorKeys: ['stock_cabai', 'weather', 'bbm', 'inflation'],
                manualChange: { value: -2500, percent: -4.28 } // Manual Cabai Nasional
            }
        },
        jatim: {
            name: "Jawa Timur",
            beras: { name: "Beras Premium", chartBase: 14750, volatility: 0.04, trend: 0.0001, outlook: { week: 0.3, month: 1.2, threeMonth: 2.0 }, factorKeys: ['stock_beras', 'bbm', 'weather', 'inflation'], manualChange: { value: -100, percent: -0.68 } },
            minyak: { name: "Minyak Goreng Curah", chartBase: 15400, volatility: 0.14, trend: 0.0002, outlook: { week: 0.7, month: 1.8, threeMonth: 2.8 }, factorKeys: ['stock_minyak', 'bbm', 'inflation', 'weather'], manualChange: { value: 75, percent: 0.49 } },
            gula: { name: "Gula Pasir", chartBase: 18150, volatility: 0.09, trend: 0.0001, outlook: { week: 0.1, month: 0.4, threeMonth: 0.8 }, factorKeys: ['stock_gula', 'bbm', 'inflation', 'weather'], manualChange: { value: -50, percent: -0.28 } },
            cabai: { name: "Cabai Rawit Merah", chartBase: 54000, volatility: 0.50, trend: 0.0000, outlook: { week: -6.0, month: -12.0, threeMonth: 18.0 }, factorKeys: ['stock_cabai', 'weather', 'bbm', 'inflation'], manualChange: { value: -3000, percent: -5.26 } }
        },
        dki: {
            name: "DKI Jakarta",
            beras: { name: "Beras Premium", chartBase: 15400, volatility: 0.06, trend: 0.0002, outlook: { week: 0.8, month: 2.0, threeMonth: 3.0 }, factorKeys: ['stock_beras', 'bbm', 'weather', 'inflation'], manualChange: { value: -200, percent: -1.30 } },
            minyak: { name: "Minyak Goreng Curah", chartBase: 15850, volatility: 0.16, trend: 0.0003, outlook: { week: 1.0, month: 2.5, threeMonth: 3.5 }, factorKeys: ['stock_minyak', 'bbm', 'inflation', 'weather'], manualChange: { value: 100, percent: 0.63 } },
            gula: { name: "Gula Pasir", chartBase: 18700, volatility: 0.11, trend: 0.0002, outlook: { week: 0.3, month: 0.8, threeMonth: 1.5 }, factorKeys: ['stock_gula', 'bbm', 'inflation', 'weather'], manualChange: { value: 50, percent: 0.27 } },
            cabai: { name: "Cabai Rawit Merah", chartBase: 61000, volatility: 0.40, trend: 0.0001, outlook: { week: -4.0, month: -8.0, threeMonth: 22.0 }, factorKeys: ['stock_cabai', 'weather', 'bbm', 'inflation'], manualChange: { value: -1500, percent: -2.40 } }
        },
        jabar: {
            name: "Jawa Barat",
            beras: { name: "Beras Premium", chartBase: 15000, volatility: 0.05, trend: 0.0001, outlook: { week: 0.4, month: 1.3, threeMonth: 2.2 }, factorKeys: ['stock_beras', 'bbm', 'weather', 'inflation'], manualChange: { value: -125, percent: -0.83 } },
            minyak: { name: "Minyak Goreng Curah", chartBase: 15600, volatility: 0.15, trend: 0.0002, outlook: { week: 0.7, month: 1.9, threeMonth: 2.9 }, factorKeys: ['stock_minyak', 'bbm', 'inflation', 'weather'], manualChange: { value: 25, percent: 0.16 } },
            gula: { name: "Gula Pasir", chartBase: 18300, volatility: 0.10, trend: 0.0001, outlook: { week: 0.2, month: 0.6, threeMonth: 1.2 }, factorKeys: ['stock_gula', 'bbm', 'inflation', 'weather'], manualChange: { value: -25, percent: -0.14 } },
            cabai: { name: "Cabai Rawit Merah", chartBase: 55500, volatility: 0.48, trend: 0.0000, outlook: { week: -5.5, month: -11.0, threeMonth: 19.0 }, factorKeys: ['stock_cabai', 'weather', 'bbm', 'inflation'], manualChange: { value: -2000, percent: -3.48 } }
        }
    };
    // ========== AKHIR MODIFIKASI MOCK_DATA ==========


    // Correlation data and metadata
    const CORRELATION_VARS = { /* ... Data Korelasi (Sama seperti sebelumnya) ... */ };
    // Pre-calculated correlation matrix
    const CORRELATION_MATRIX = { /* ... Matriks Korelasi (Sama seperti sebelumnya) ... */ };


    // --- GLOBAL VARIABLES & STATE ---
    let priceChart, correlationChart;
    let factorCharts = {}; // Object to hold dynamic factor charts
    let currentRegion = 'nasional';
    let currentCommodity = 'beras';
    let currentTimeRange = 30;
    let currentDate = new Date(); // This will be the REAL today on load
    let currentFactorFilter = 'semua'; // State baru untuk filter halaman faktor

    // --- UTILITY FUNCTIONS ---
    const formatCurrency = (value) => new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 }).format(value);
    const formatNumber = (value, digits = 2) => new Intl.NumberFormat('id-ID', { minimumFractionDigits: digits, maximumFractionDigits: digits }).format(value);

    // simple deterministic PRNG for seeded random numbers
    function seededRandom(seed) { /* ... Fungsi seededRandom (Sama seperti sebelumnya) ... */ }

    // Generate time series data with trend and seeded randomness
    const generateTimeSeriesData = (days, base, volatility, trend = 0, seed = 1) => { /* ... Fungsi generateTimeSeriesData (Sama seperti sebelumnya) ... */ };

    // Dynamically generate overview data based on date
    const generateDynamicData = (commodityKey, regionKey, date) => {
         const commodity = MOCK_DATA[regionKey][commodityKey];
        if (!commodity) return {};

        const seed = date.getDate() + date.getMonth() * 31 + commodityKey.charCodeAt(0) + regionKey.charCodeAt(0);
        const rand = seededRandom(seed);
        const randYesterday = seededRandom(seed - 1); // Seed for yesterday's price

        const basePrice = commodity.chartBase;

        // Buat harga hari ini dan kemarin berdasarkan data historis
        const todayData = generateTimeSeriesData(1, basePrice, commodity.volatility, commodity.trend, seed);
        const todayPrice = todayData[0].y;

        // Perlu seed kemarin untuk harga kemarin
        const yesterdayData = generateTimeSeriesData(1, basePrice, commodity.volatility, commodity.trend, seed - 1);
        const yesterdayPrice = yesterdayData[0].y;

        const change = todayPrice - yesterdayPrice;
        const changePercent = (change / yesterdayPrice) * 100;

        // Prediksi dipengaruhi oleh outlook mingguan
        const outlookBias = (commodity.outlook.week / 100) * (basePrice * 0.2); // Bias dari outlook
        const randomJitter = (rand() - 0.5) * (basePrice * 0.02); // Jitter acak
        const prediction = todayPrice + outlookBias + randomJitter;

       return {
            lastPrice: Math.round(todayPrice / 50) * 50, // Round to nearest 50
            change: change, // Keep original change value
            changePercent: changePercent,
            prediction: Math.round(prediction / 50) * 50
        };
    };

    // --- PAGE ROUTING & LOGIN LOGIC ---
    document.addEventListener('DOMContentLoaded', () => { /* ... DOMContentLoaded (Sama seperti sebelumnya) ... */ });


    function initializeApp() {
        const sidebarNav = document.getElementById('sidebar-nav');
        const pages = document.querySelectorAll('.page');

        // --- RESPONSIVE CODE ---
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const sidebar = document.querySelector('aside');
        const backdrop = document.getElementById('sidebar-backdrop');

        const toggleSidebar = () => {
            sidebar.classList.toggle('-translate-x-full'); // Memunculkan/menyembunyikan sidebar
            backdrop.classList.toggle('hidden'); // Memunculkan/menyembunyikan backdrop
        };

        mobileMenuBtn.addEventListener('click', toggleSidebar);
        backdrop.addEventListener('click', toggleSidebar);
        // --- END RESPONSIVE CODE ---

        sidebarNav.addEventListener('click', (e) => { /* ... sidebarNav Listener (Sama seperti sebelumnya, termasuk penutup sidebar di mobile) ... */ });

        // --- FACTORS PAGE DROPDOWN LISTENER ---
        const factorCommoditySelect = document.getElementById('factors-commodity-select');
        factorCommoditySelect.addEventListener('change', (e) => { /* ... factorCommoditySelect Listener (Sama seperti sebelumnya) ... */ });
        // --- END FACTORS PAGE LISTENER ---

        // --- DASHBOARD PAGE LOGIC ---
        function initDashboardPage() {
            const regionSelect = document.getElementById('region-select');
            const commoditySelect = document.getElementById('commodity-select');
            const timeRangeSelector = document.getElementById('time-range-selector');
            const dateInput = document.getElementById('currentDateInput');

            dateInput.valueAsDate = currentDate;

            dateInput.addEventListener('change', (e) => { /* ... dateInput Listener (Sama seperti sebelumnya) ... */ });

            const generateAggregatedData = (days, basePrice, commodity, seed) => { /* ... Fungsi generateAggregatedData (Sama seperti sebelumnya) ... */ };

            const generateChartData = (days, basePrice, commodity) => { /* ... Fungsi generateChartData (Sama seperti sebelumnya) ... */ };

            // ========== MODIFIKASI FUNGSI updateOverview ==========
            const updateOverview = (data) => {
                // **PENTING**: Dapatkan data komoditas lengkap dari MOCK_DATA
                const commodityData = MOCK_DATA[currentRegion][currentCommodity];
                const { lastPrice, prediction } = data; // Ambil lastPrice & prediction dari data dinamis

                document.querySelector('#overview-last-price p:last-child').textContent = formatCurrency(lastPrice);

                // --- Sinkronisasi Prediksi --- (Tetap sama, tidak terpengaruh manual change)
                const predContainer = document.getElementById('overview-prediction');
                const predIconDiv = predContainer.querySelector('.p-3');
                const predText = predContainer.querySelector('p:last-child');
                predText.textContent = formatCurrency(prediction);

                let predIconName, predDivClasses, predTextClasses;
                if (prediction > lastPrice + 10) { // +10 toleransi
                    predIconName = 'arrow-up-right';
                    predDivClasses = 'p-3 bg-green-100 text-green-600 rounded-full';
                    predTextClasses = 'text-2xl font-bold text-green-600';
                } else if (prediction < lastPrice - 10) { // -10 toleransi
                    predIconName = 'arrow-down-right';
                    predDivClasses = 'p-3 bg-red-100 text-red-600 rounded-full';
                    predTextClasses = 'text-2xl font-bold text-red-600';
                } else {
                    predIconName = 'minus';
                    predDivClasses = 'p-3 bg-slate-100 text-slate-600 rounded-full';
                    predTextClasses = 'text-2xl font-bold text-slate-800';
                }
                predIconDiv.className = predDivClasses;
                predIconDiv.innerHTML = `<i data-lucide="${predIconName}"></i>`;
                predText.className = predTextClasses;
                // --- Akhir Sinkronisasi Prediksi ---


                // ========== MODIFIKASI PERUBAHAN 24 JAM (GUNAKAN MANUAL DARI MOCK_DATA) ==========
                const changeContainer = document.getElementById('overview-price-change');
                const changeIconDiv = changeContainer.querySelector('.p-3');
                const changeText = changeContainer.querySelector('p:last-child');

                let displayChangeValue = 0;
                let displayChangePercent = 0.00;

                // Cek apakah ada data manualChange di MOCK_DATA untuk komoditas saat ini
                if (commodityData && commodityData.manualChange) {
                    displayChangeValue = commodityData.manualChange.value;
                    displayChangePercent = commodityData.manualChange.percent;
                } else {
                    // Fallback jika tidak ada data manual (opsional: bisa gunakan data.change dan data.changePercent dari kalkulasi asli)
                    console.warn(`Manual change data not found for ${currentCommodity} in ${currentRegion}. Using 0.`);
                }

                // Tampilkan nilai (manual atau fallback 0)
                changeText.innerHTML = `${formatCurrency(displayChangeValue)} <span class="text-base font-medium ml-2">(${displayChangePercent.toFixed(2)}%)</span>`;

                // Atur warna dan ikon berdasarkan nilai yang ditampilkan
                let iconName, divClasses, textClasses;
                if (displayChangeValue > 0) { // Jika naik
                    iconName = 'trending-up';
                    divClasses = 'p-3 bg-green-100 text-green-600 rounded-full';
                    textClasses = 'text-2xl font-bold text-green-600 flex items-center';
                } else if (displayChangeValue < 0) { // Jika turun
                    iconName = 'trending-down';
                    divClasses = 'p-3 bg-red-100 text-red-600 rounded-full';
                    textClasses = 'text-2xl font-bold text-red-600 flex items-center';
                } else { // Jika 0
                    iconName = 'minus';
                    divClasses = 'p-3 bg-slate-100 text-slate-600 rounded-full';
                    textClasses = 'text-2xl font-bold text-slate-800 flex items-center';
                }

                changeIconDiv.className = divClasses;
                changeIconDiv.innerHTML = `<i data-lucide="${iconName}"></i>`;
                changeText.className = textClasses;
                // ========== AKHIR MODIFIKASI ==========
            };
            // ========== AKHIR MODIFIKASI FUNGSI updateOverview ==========


            const updateFactorsSummary = (factorKeys) => { /* ... Fungsi updateFactorsSummary (Sama seperti sebelumnya) ... */ };

            const updateRecommendations = (regionData, currentCommodityKey) => { /* ... Fungsi updateRecommendations (Sama seperti sebelumnya) ... */ };

            const updateOutlookTable = (regionData) => { /* ... Fungsi updateOutlookTable (Sama seperti sebelumnya) ... */ };

            const updateChart = (data, timeRange) => { /* ... Fungsi updateChart (Sama seperti sebelumnya) ... */ };

            window.updateDashboard = () => { /* ... Fungsi updateDashboard (Sama seperti sebelumnya) ... */ };

            regionSelect.addEventListener('change', (e) => { currentRegion = e.target.value; updateDashboard(); });
            commoditySelect.addEventListener('change', (e) => { currentCommodity = e.target.value; updateDashboard(); });
            timeRangeSelector.addEventListener('click', (e) => { /* ... timeRangeSelector Listener (Sama seperti sebelumnya) ... */ });

            const ctx = document.getElementById('priceChart').getContext('2d');
            priceChart = new Chart(ctx, { /* ... Konfigurasi Chart.js priceChart (Sama seperti sebelumnya) ... */ });

            updateDashboard();
        }

        // --- CORRELATION PAGE LOGIC ---
        function initCorrelationPage() { /* ... Fungsi initCorrelationPage (Sama seperti sebelumnya) ... */ }

        // --- EXTERNAL FACTORS PAGE LOGIC ---
        const createFactorChart = (canvasId, data, color) => { /* ... Fungsi createFactorChart (Sama seperti sebelumnya) ... */ };
        window.renderFactorsPage = () => { /* ... Fungsi renderFactorsPage (Sama seperti sebelumnya) ... */ };
        // --- END FACTORS PAGE LOGIC ---

        // --- GLOBAL INITIALIZATION ---
        initDashboardPage();
        // initCorrelationPage(); // Lazily loaded on page view
        // renderFactorsPage(); // Lazily loaded on page view
        lucide.createIcons();
    }
    </script>
</body>
</html>
